<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Chat Genius</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body data-user-id="{{ current_user.id }}">
  <div id="top-bar">
    <div class="user-info">
      <span>{{ current_user.email }}</span>
      <button id="sign-out-btn" class="sign-out-btn">Sign Out</button>
    </div>
  </div>

  <div class="main-content">
    <div id="sidebar">
      <div class="sidebar-section">
        <h2>Channels</h2>
        <div id="channel-list"></div>

        <form id="channel-form">
          <input type="text" id="channel-name" placeholder="New channel name" required />
          <button type="submit">Create Channel</button>
        </form>
        <div id="channel-error" class="error"></div>
      </div>

      <div class="sidebar-section">
        <h2>Direct Messages</h2>
        <div id="dm-list"></div>

        <button id="new-dm-btn" class="secondary-btn">New Direct Message</button>
        <div id="dm-error" class="error"></div>

        <!-- DM User Selection Modal -->
        <div id="dm-modal" class="modal" style="display: none;">
          <div class="modal-content">
            <h3>New Direct Message</h3>
            <input type="text" id="user-search" placeholder="Search users..." />
            <div id="user-list"></div>
            <button id="close-dm-modal" class="secondary-btn">Cancel</button>
          </div>
        </div>
      </div>
    </div>

    <div id="main">
      <h2 id="channel-title">Select a channel</h2>
      <div id="message-list"></div>

      <form id="message-form" style="display: none;">
        <textarea id="message-content" rows="2" placeholder="Type a message..."></textarea>
        <button type="submit">Send</button>
      </form>
      <div id="message-error" class="error"></div>
    </div>
  </div>

  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>

